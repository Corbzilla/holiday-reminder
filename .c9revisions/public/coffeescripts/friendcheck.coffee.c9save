{"ts":1349098844790,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"class FriendCheck\r\n    constructor: (btn, email, redirect) ->\r\n        @email = $(email)\r\n        @btnCheckFriends = $(btn)\r\n        @btnCheckFriends.on(\"click\", @submit)\r\n        $(\".jqFriend\").on(\"click\", @submitFriend)\r\n        $(\"#btnFindFb\").on(\"click\", @checkFacebook)\r\n        @redirect = redirect\r\n    submit: () =>\r\n        data = \r\n            email: @email.val()\r\n        window.location.href=\"/friendlist/\" + data.email;\r\n        ##AJAX##\r\n        ##Utility.ajaxOptions.url =\"/friendlist\"\r\n        ##Utility.ajaxOptions.success = @success\r\n        ##Utility.ajaxOptions.error = @error\r\n        ##Utility.ajaxOptions.data = JSON.stringify(data)\r\n        ##$.ajax(Utility.ajaxOptions)\r\n        return\r\n    submitFriend: () ->\r\n        friend = $(@).siblings('.friendId')\r\n        friendId = friend.val()\r\n        data =\r\n            friend: friendId\r\n        getFriendSuccess = (response) ->\r\n            if response\r\n                for item, i in response\r\n                    itemOut = $(\"<li><h3>\" + item.item.name + \"</h3><div class='item_desc'>\"  +item.item.desc + \"</div></li>\");\r\n                    if item.link\r\n                        itemLink = \"<a href='http://\" + item.item.link + \"' target='_BLANK'>Link To Item</a>\"\r\n                        itemOut.append(itemLink)\r\n                    itemOut.append(\"<input type='button' class='btnAmazon btn btn-small' value='Search Amazon' />\")\r\n                    itemOut.append(\"<input type='button' class='btn btn-small bntAddToList' value='Add to Shopping List' />\")\r\n                    itemOut.append(\"<input type='button' class='btn btn-small btnFindLocal' value='Find Locally' />\")\r\n                    itemOut.append(\"<input type='button' class='btn btn-small btnMarked' value='Mark as Purchased' />\")\r\n                    itemOut.append(\"<input type='hidden' class='itemId' value='\" + item._id + \"' />\")\r\n                    itemOut.append(\"<div class='results'></div>\")\r\n                    friend.parent().append(itemOut)\r\n            return\r\n        getFriendError = () ->\r\n            return\r\n        Utility.ajaxOptions.url =\"/getfriendlist\"\r\n        Utility.ajaxOptions.success = getFriendSuccess\r\n        Utility.ajaxOptions.error = getFriendError\r\n        Utility.ajaxOptions.data = JSON.stringify(data)\r\n        $.ajax(Utility.ajaxOptions)\r\n        return\r\n    checkFacebook: () =>\r\n        FB.api \"/me/friends\", (response) ->\r\n            if not response or response.error\r\n                ## err handling\r\n            else\r\n                data =\r\n                    friends: response.data,\r\n                    redirect: @redirect\r\n                Utility.ajaxOptions.url =\"/fbfriendlist\"\r\n                Utility.ajaxOptions.success = (response) ->\r\n                    return\r\n                Utility.ajaxOptions.error = (response) ->\r\n                    return\r\n                Utility.ajaxOptions.data = JSON.stringify(data)\r\n                $.ajax(Utility.ajaxOptions)\r\n            return\r\n        return\r\n    ##success: () =>\r\n        ##window.location.href = \"/friendlist\"\r\n        ##return\r\n    ##error: () =>\r\n        ##return"]],"start1":0,"start2":0,"length1":0,"length2":3124}]],"length":3124}
{"contributors":[],"silentsave":false,"ts":1349102657757,"patch":[[{"diffs":[[0,"emLink ="],[1," \"<div class='link_container'>\"\r\n                        itemLink +="],[0," \"<a hre"]],"start1":1158,"start2":1158,"length1":16,"length2":84},{"diffs":[[0,"'http://\" + "],[-1,"item."],[0,"item.link + "]],"start1":1244,"start2":1244,"length1":29,"length2":24},{"diffs":[[0," Item</a>\"\r\n"],[1,"                        itemLink += \"</div>\"\r\n"],[0,"            "]],"start1":1294,"start2":1294,"length1":24,"length2":70}]],"length":3233,"saved":false}
{"ts":1349102705526,"patch":[[{"diffs":[[0,"'http://\" + "],[1,"item."],[0,"item.link + "]],"start1":1244,"start2":1244,"length1":24,"length2":29}]],"length":3238,"saved":false}
{"ts":1349103114518,"patch":[[{"diffs":[[0,"sc'>"],[1,"Show Description</div><div class='item_data>'"],[0,"\"  +"],[1," "],[0,"item"]],"start1":1056,"start2":1056,"length1":12,"length2":58}]],"length":3284,"saved":false}
{"ts":1349103121793,"patch":[[{"diffs":[[0,"data"],[-1,">"],[0,"'"],[1,">"],[0,"\"  +"]],"start1":1099,"start2":1099,"length1":10,"length2":10}]],"length":3284,"saved":false}
{"contributors":[],"silentsave":false,"ts":1349640785157,"patch":[[{"diffs":[[0,"        "],[1,"##"],[0,"$(\"#btnF"]],"start1":223,"start2":223,"length1":16,"length2":18}]],"length":3286,"saved":false}
{"contributors":[],"silentsave":false,"ts":1349902273612,"patch":[[{"diffs":[[0,"riend)\r\n"],[1,"        $(\"body\").on(\"click\", \".jqFbFriend\", @submitFbFriend)\r\n"],[0,"        "]],"start1":215,"start2":215,"length1":16,"length2":79}]],"length":3349,"saved":false}
{"ts":1349902301085,"patch":[[{"diffs":[[0,"    return\r\n"],[1,"    submitFbFriend: () ->\r\n        friend = $(@).siblings('.friendId')\r\n        friendId = friend.val()\r\n        data =\r\n            friend: friendId\r\n        getFriendSuccess = (response) ->\r\n            if response\r\n                for item, i in response\r\n                    itemOut = $(\"<li><h3>\" + item.item.name + \"</h3><div class='item_desc'>Show Description</div><div class='item_data'>\"  + item.item.desc + \"</div></li>\");\r\n                    if item.link\r\n                        itemLink = \"<div class='link_container'>\"\r\n                        itemLink += \"<a href='http://\" + item.item.link + \"' target='_BLANK'>Link To Item</a>\"\r\n                        itemLink += \"</div>\"\r\n                        itemOut.append(itemLink)\r\n                    itemOut.append(\"<input type='button' class='btnAmazon btn btn-small' value='Search Amazon' />\")\r\n                    itemOut.append(\"<input type='button' class='btn btn-small bntAddToList' value='Add to Shopping List' />\")\r\n                    itemOut.append(\"<input type='button' class='btn btn-small btnFindLocal' value='Find Locally' />\")\r\n                    itemOut.append(\"<input type='button' class='btn btn-small btnMarked' value='Mark as Purchased' />\")\r\n                    itemOut.append(\"<input type='hidden' class='itemId' value='\" + item._id + \"' />\")\r\n                    itemOut.append(\"<div class='results'></div>\")\r\n                    friend.parent().append(itemOut)\r\n            return\r\n        getFriendError = () ->\r\n            return\r\n        Utility.ajaxOptions.url =\"/getfriendlist\"\r\n        Utility.ajaxOptions.success = getFriendSuccess\r\n        Utility.ajaxOptions.error = getFriendError\r\n        Utility.ajaxOptions.data = JSON.stringify(data)\r\n        $.ajax(Utility.ajaxOptions)\r\n        return\r\n"],[0,"    checkFac"]],"start1":2554,"start2":2554,"length1":24,"length2":1815}]],"length":5140,"saved":false}
{"ts":1349902306320,"patch":[[{"diffs":[[0," =\r\n            "],[-1,"frien"],[1,"matchI"],[0,"d: friendId\r\n   "]],"start1":2683,"start2":2683,"length1":37,"length2":38}]],"length":5141,"saved":false}
{"ts":1349902344678,"patch":[[{"diffs":[[0,"ions.url =\"/getf"],[1,"bf"],[0,"riendlist\"\r\n    "]],"start1":4112,"start2":4112,"length1":32,"length2":34}]],"length":5143,"saved":false}
