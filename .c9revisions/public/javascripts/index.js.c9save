{"ts":1350748011599,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"// Generated by CoffeeScript 1.3.3\n(function() {\n  var FriendCheck, Index, Register, SignIn, Utility, ind,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  Utility = (function() {\n\n    function Utility() {}\n\n    Utility.ajaxOptions = {\n      url: \"/\",\n      type: \"POST\",\n      dataType: \"json\",\n      contentType: \"application/json; charset=UTF-8\",\n      success: function() {},\n      error: function() {}\n    };\n\n    return Utility;\n\n  })();\n\n  SignIn = (function() {\n\n    function SignIn() {\n      this.error = __bind(this.error, this);\n\n      this.success = __bind(this.success, this);\n\n      this.submit = __bind(this.submit, this);\n      this.userName = $(\"#userName\");\n      this.passWord = $(\"#passWord\");\n      this.btnSignIn = $(\"#btnSignIn\");\n      this.signInErr = $(\"#signInErr\");\n      this.btnSignIn.on(\"click\", this.submit);\n    }\n\n    SignIn.prototype.submit = function() {\n      var data;\n      this.signInErr.hide();\n      data = {\n        username: this.userName.val(),\n        password: this.passWord.val()\n      };\n      Utility.ajaxOptions.url = \"/signin\";\n      Utility.ajaxOptions.success = this.success;\n      Utility.ajaxOptions.error = this.error;\n      Utility.ajaxOptions.data = JSON.stringify(data);\n      $.ajax(Utility.ajaxOptions);\n    };\n\n    SignIn.prototype.success = function() {\n      window.location.href = \"/dashboard\";\n    };\n\n    SignIn.prototype.error = function() {\n      this.signInErr.show();\n    };\n\n    return SignIn;\n\n  })();\n\n  Register = (function() {\n\n    function Register() {\n      this.error = __bind(this.error, this);\n\n      this.success = __bind(this.success, this);\n\n      this.checkPass = __bind(this.checkPass, this);\n\n      this.submit = __bind(this.submit, this);\n      this.regName = $(\"#regName\");\n      this.regEmail = $(\"#regEmail\");\n      this.regPass = $(\"#regPass\");\n      this.regConfirm = $(\"#regConfirm\");\n      this.btnRegister = $(\"#btnRegister\");\n      this.passErr = $(\"#passErr\");\n      this.regErr = $(\"#regErr\");\n      this.btnRegister.on(\"click\", this.submit);\n      this.regConfirm.on(\"keyup\", this.checkPass);\n    }\n\n    Register.prototype.submit = function() {\n      var data;\n      this.regErr.hide();\n      data = {\n        name: this.regName.val(),\n        email: this.regEmail.val(),\n        pass: this.regPass.val()\n      };\n      Utility.ajaxOptions.url = \"/register\";\n      Utility.ajaxOptions.success = this.success;\n      Utility.ajaxOptions.error = this.error;\n      Utility.ajaxOptions.data = JSON.stringify(data);\n      $.ajax(Utility.ajaxOptions);\n    };\n\n    Register.prototype.checkPass = function() {\n      var confirm, pass;\n      pass = this.regPass.val();\n      confirm = this.regConfirm.val();\n      if (pass === confirm) {\n        this.passErr.hide();\n        return;\n      } else {\n        this.passErr.show();\n      }\n    };\n\n    Register.prototype.success = function() {\n      window.location.href = \"/dashboard\";\n    };\n\n    Register.prototype.error = function() {\n      this.regErr.show();\n    };\n\n    return Register;\n\n  })();\n\n  FriendCheck = (function() {\n\n    function FriendCheck(btn, email, redirect) {\n      this.checkFacebook = __bind(this.checkFacebook, this);\n\n      this.submit = __bind(this.submit, this);\n      this.email = $(email);\n      this.btnCheckFriends = $(btn);\n      this.btnCheckFriends.on(\"click\", this.submit);\n      $(\".jqFriend\").on(\"click\", this.submitFriend);\n      $(\"#btnFindFb\").on(\"click\", this.checkFacebook);\n      this.redirect = redirect;\n    }\n\n    FriendCheck.prototype.submit = function() {\n      var data;\n      data = {\n        email: this.email.val()\n      };\n      window.location.href = \"/friendlist/\" + data.email;\n    };\n\n    FriendCheck.prototype.submitFriend = function() {\n      var data, friend, friendId, getFriendError, getFriendSuccess;\n      friend = $(this).siblings('.friendId');\n      friendId = friend.val();\n      data = {\n        friend: friendId\n      };\n      getFriendSuccess = function(response) {\n        friend.parent().append('<p>' + response + '</p>');\n      };\n      getFriendError = function() {};\n      Utility.ajaxOptions.url = \"/getfriendlist\";\n      Utility.ajaxOptions.success = getFriendSuccess;\n      Utility.ajaxOptions.error = getFriendError;\n      Utility.ajaxOptions.data = JSON.stringify(data);\n      $.ajax(Utility.ajaxOptions);\n    };\n\n    FriendCheck.prototype.checkFacebook = function() {\n      FB.api(\"/me/friends\", function(response) {\n        var data;\n        if (!response || response.error) {\n\n        } else {\n          data = {\n            friends: response.data,\n            redirect: this.redirect\n          };\n          Utility.ajaxOptions.url = \"/fbfriendlist\";\n          Utility.ajaxOptions.success = function(response) {};\n          Utility.ajaxOptions.error = function(response) {};\n          Utility.ajaxOptions.data = JSON.stringify(data);\n          $.ajax(Utility.ajaxOptions);\n        }\n      });\n    };\n\n    return FriendCheck;\n\n  })();\n\n  Index = (function() {\n\n    function Index() {\n      this.sign = new SignIn();\n      this.ref = new Register();\n      this.friendCheck = new FriendCheck(\"#btnCheckFriends\", \"#email\", true);\n    }\n\n    return Index;\n\n  })();\n\n  ind = new Index();\n\n}).call(this);\n"]],"start1":0,"start2":0,"length1":0,"length2":5262}]],"length":5262}
